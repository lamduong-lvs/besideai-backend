/* screenshot/camera-overlay.css - FIXED VERSION (Drag Issue Resolved) */

/* ✅ PROTECTION: Override website CSS that affects SVG icons */
#recorderCameraOverlay svg {
    fill: none !important;
    stroke: currentColor !important;
    stroke-width: 2 !important;
    stroke-linecap: round !important;
    stroke-linejoin: round !important;
    transform: none !important;
    filter: none !important;
    mix-blend-mode: normal !important;
    opacity: 1 !important;
}

/* ✅ Main container - isolation from website CSS */
#recorderCameraOverlay {
    /* Position & Layout */
    position: fixed !important;
    bottom: 20px !important;
    right: 20px !important;
    display: block !important;
    box-sizing: border-box !important;
    
    /* Z-index */
    z-index: 999998 !important;
    
    /* Visual */
    background: #000 !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
    overflow: hidden !important;
    
    /* Interaction */
    user-select: none !important;
    -webkit-user-select: none !important;
    pointer-events: auto !important;
    
    /* Transition */
    transition: all 0.3s ease !important;
    
    /* Reset potentially conflicting properties */
    margin: 0 !important;
    padding: 0 !important;
    opacity: 1 !important;
    visibility: visible !important;
    filter: none !important;
}

/* Hidden state */
#recorderCameraOverlay.hidden {
    display: none !important;
}

/* Circle Shape */
#recorderCameraOverlay.circle {
    border-radius: 50%;
    width: 200px;
    height: 200px;
}

/* Square Shape */
#recorderCameraOverlay.square {
    border-radius: 12px;
    width: 200px;
    height: 150px;
}

/* ✅ FIXED: Video - BỎ position: relative để không tạo stacking context */
#recorderCameraOverlay video {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    display: block !important;
    pointer-events: none !important;
    /* ✅ REMOVED: position: relative */
    /* ✅ REMOVED: z-index: 2 */
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
}


/* ✅ Controls Overlay - pointer-events none by default */
.camera-controls {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: rgba(0, 0, 0, 0.5) !important;
    opacity: 0 !important;
    transition: opacity 0.2s ease !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    z-index: 10 !important;
    pointer-events: none !important;
}

/* ✅ Only enable pointer-events when hovering */
#recorderCameraOverlay:hover .camera-controls {
    opacity: 1 !important;
}

/* ✅ Control Buttons */
.camera-control-btn {
    width: 36px !important;
    height: 36px !important;
    background: rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border: none !important;
    border-radius: 50% !important;
    cursor: pointer !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.2s ease !important;
    pointer-events: all !important;
    padding: 0 !important;
    margin: 0 !important;
}

.camera-control-btn:hover {
    background: rgba(255, 255, 255, 0.3) !important;
    transform: scale(1.1) !important;
}

.camera-control-btn svg {
    width: 18px !important;
    height: 18px !important;
    color: white !important;
}

.camera-control-btn.close {
    background: rgba(220, 53, 69, 0.8) !important;
}

.camera-control-btn.close:hover {
    background: rgba(220, 53, 69, 1) !important;
}

/* ✅ Resize Handles */
.camera-resize-handle {
    position: absolute !important;
    width: 24px !important;
    height: 24px !important;
    background: rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    opacity: 0 !important;
    transition: opacity 0.2s ease !important;
    z-index: 11 !important;
    pointer-events: all !important;
}

/* Vị trí từng góc */
.camera-resize-nw {
    top: 4px !important;
    left: 4px !important;
    cursor: nwse-resize !important;
}

.camera-resize-ne {
    top: 4px !important;
    right: 4px !important;
    cursor: nesw-resize !important;
}

.camera-resize-sw {
    bottom: 4px !important;
    left: 4px !important;
    cursor: nesw-resize !important;
}

.camera-resize-se {
    bottom: 4px !important;
    right: 4px !important;
    cursor: nwse-resize !important;
}

#recorderCameraOverlay:hover .camera-resize-handle {
    opacity: 1 !important;
}

.camera-resize-handle svg {
    width: 14px !important;
    height: 14px !important;
    color: white !important;
}

/* Dragging State */
#recorderCameraOverlay.dragging {
    cursor: move !important;
    transition: none !important;
}

#recorderCameraOverlay.dragging * {
    cursor: move !important;
}

/* Resizing State */
#recorderCameraOverlay.resizing {
    transition: none !important;
}

#recorderCameraOverlay.resizing * {
    cursor: inherit !important;
}

/* Animation */
@keyframes cameraFadeIn {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

#recorderCameraOverlay {
    animation: cameraFadeIn 0.3s ease !important;
}

/* Border Indicator */
#recorderCameraOverlay::after {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    border: 2px solid rgba(26, 115, 232, 0.5) !important;
    pointer-events: none !important;
    z-index: 1 !important; /* ✅ Đảm bảo border nằm dưới drag handle */
}

#recorderCameraOverlay.circle::after {
    border-radius: 50% !important;
}

#recorderCameraOverlay.square::after {
    border-radius: 12px !important;
}

/* Size Variants */
#recorderCameraOverlay.size-small {
    width: 150px !important;
    height: 150px !important;
}

#recorderCameraOverlay.size-small.square {
    width: 150px !important;
    height: 112px !important;
}

#recorderCameraOverlay.size-medium {
    width: 200px !important;
    height: 200px !important;
}

#recorderCameraOverlay.size-medium.square {
    width: 200px !important;
    height: 150px !important;
}

#recorderCameraOverlay.size-large {
    width: 300px !important;
    height: 300px !important;
}

#recorderCameraOverlay.size-large.square {
    width: 300px !important;
    height: 225px !important;
}