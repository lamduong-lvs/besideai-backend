<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="titleScreenRecorder">Screen Recorder</title>
    <link rel="stylesheet" href="../../styles/tooltip-system.css">
    <link rel="stylesheet" id="recorderTabCss">
</head>
<body>
    <div id="setupScreen" class="screen active">
        <div class="container">
            <h1 class="title" data-i18n="setupTitle">Sẵn sàng ghi hình</h1>
            <p class="subtitle" data-i18n="setupSubtitle">Kiểm tra cài đặt và nhấn "Bắt đầu ghi hình"</p>

            <div class="settings-preview">
                <div class="setting-item">
                    <svg class="icon" viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                    <span id="sourceStatus"></span>
                </div>
                <div class="setting-item">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"/></svg>
                    <span id="micStatus"></span>
                </div>
                <div class="setting-item">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
                    <span id="cameraStatus"></span>
                </div>
                 <div class="setting-item">
                    <svg class="icon" fill="currentColor" viewBox="0 0 24 24"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/></svg>
                    <span id="clickStatus"></span>
                </div>
                <div class="setting-item">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                    <span id="drawStatus"></span>
                </div>
                <div class="setting-item">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                    <span id="controlBarStatus"></span>
                </div>
                <div class="setting-item">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M21 7.5a2.5 2.5 0 0 0-2.5-2.5h-13A2.5 2.5 0 0 0 3 7.5v9A2.5 2.5 0 0 0 5.5 19h13a2.5 2.5 0 0 0 2.5-2.5v-9zM12 12H9.5v1.5h-1V9H12c.8 0 1.5.7 1.5 1.5v0c0 .8-.7 1.5-1.5 1.5zm-1-2.5h-1V12h1v-2.5zm5.5 4h-1v-1.2l-.5-.8v2H14V9h1.5v1.2l.5.8V9H17v5.5z"/></svg>
                    <span id="qualityStatus"></span>
                </div>
            </div>

            <button id="startRecordingBtn" class="primary-btn">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg>
                <span data-i18n="setupStartButton">Bắt Đầu Ghi Hình</span>
            </button>
            <button id="backToSettingsBtn" class="secondary-btn">
                <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/></svg>
                <span data-i18n="setupChangeButton">Thay Đổi Cài Đặt</span>
            </button>
        </div>
    </div>

    <div id="recordingScreen" class="screen">
        <div class="recording-container">
            <div class="recording-indicator"><div class="rec-dot"></div><span class="rec-text" data-i18n="recordingIndicator">ĐANG GHI</span></div>
            <div class="timer-display"><span id="recordingTime">00:00</span></div>
            <div class="recording-controls">
                <button id="pauseBtn" class="control-btn" data-tooltip="tooltips.recorder.pauseBtn"><svg class="icon" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg><span class="btn-label" data-i18n="recordingPause">Tạm dừng</span></button>
                <button id="stopBtn" class="control-btn stop-btn" data-tooltip="tooltips.recorder.stopBtn"><svg class="icon" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12"/></svg><span class="btn-label" data-i18n="recordingStop">Dừng</span></button>
            </div>
            <div class="recording-info">
                <p data-i18n="recordingInfo1">Đang ghi hình màn hình của bạn...</p>
                <p class="hint" data-i18n="recordingInfo2">Sử dụng thanh điều khiển trên các tab để điều chỉnh trong khi ghi</p>
            </div>
        </div>
    </div>

    <div id="previewScreen" class="screen">
        <div class="preview-container">
            <div class="preview-left">
                <h2 class="preview-title" data-i18n="previewTitle">Video đã ghi</h2>
                <div class="video-wrapper"><video id="previewVideo" controls></video></div>
            </div>
            <div class="preview-right">
                <div class="video-info">
                    <h3 class="info-title" data-i18n="previewInfoTitle">Thông tin video</h3>
                    <div class="info-group"><label data-i18n="previewLabelName">Tên file</label><input type="text" id="videoName" class="info-input" placeholder="recording.webm"></div>
                    <div class="info-grid">
                        <div class="info-item"><label data-i18n="previewLabelSize">Dung lượng</label><span id="videoSize">-</span></div>
                        <div class="info-item"><label data-i18n="previewLabelFormat">Định dạng</label><span id="videoFormat">-</span></div>
                        <div class="info-item"><label data-i18n="previewLabelDuration">Độ dài</label><span id="videoDuration">-</span></div>
                        <div class="info-item"><label data-i18n="previewLabelResolution">Độ phân giải</label><span id="videoResolution">-</span></div>
                    </div>
                    <div class="save-location-preview">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
                        <div class="save-location-preview-text"><span class="label" data-i18n="previewLabelSaveLocation">Nơi lưu file</span><span class="path">Videos</span></div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button id="downloadBtn" class="action-btn primary"><svg class="icon" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg><span data-i18n="previewDownload">Tải Xuống</span></button>
                    <button id="deleteBtn" class="action-btn danger"><svg class="icon" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg><span data-i18n="previewDelete">Xóa Video</span></button>
                    <button id="newRecordingBtn" class="action-btn"><svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3" fill="currentColor"/></svg><span data-i18n="previewNewRecording">Ghi Mới</span></button>
                </div>
                <div class="share-section">
                    <h4 class="share-title" data-i18n="previewShareTitle">Chia sẻ</h4>
                    <div class="share-buttons">
                        <button id="shareGoogleDrive" class="share-btn" data-tooltip="tooltips.recorder.shareGoogleDrive">
                            <img id="shareGoogleDriveIcon" class="icon" alt="Google Drive">
                            Google Drive
                        </button>
                        <button id="shareYouTube" class="share-btn" data-tooltip="tooltips.recorder.shareYouTube">
                            <img id="shareYouTubeIcon" class="icon" alt="YouTube">
                            YouTube
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p class="loading-text" data-i18n="loadingProcessing">Đang xử lý video...</p>
    </div>
    
    <script src="../../js/i18n.js"></script>
    <script type="module" src="../../utils/tooltip-manager.js"></script>
    
    <script src="utils.js"></script>
    <script src="storage.js"></script>
    <script src="recorder-tab.js"></script>
</body>
</html>