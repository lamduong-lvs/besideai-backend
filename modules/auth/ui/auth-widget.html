<!-- modules/auth/ui/auth-widget.html -->
<!-- Auth Widget - Hiển thị trong Panel, dưới Settings button -->
<!-- *** PHIÊN BẢN CẬP NHẬT (i18n) *** -->
<!-- - Đã thêm các thuộc tính data-i18n cho tất cả văn bản tĩnh -->

<div id="authWidget" class="auth-widget">
  <!-- Logged Out State -->
  <div id="authLoggedOut" class="auth-state auth-logged-out">
    <button id="btnAuthLogin" class="auth-login-btn" 
            title="Đăng nhập với Google" data-tooltip="tooltips.auth.loginBtn">
      <svg class="auth-icon-user" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span class="auth-login-text" data-i18n="authLoginButton">Đăng nhập</span>
    </button>
  </div>

  <!-- Logged In State -->
  <div id="authLoggedIn" class="auth-state auth-logged-in hidden">
    <!-- User Avatar Button -->
    <button id="btnAuthProfile" class="auth-profile-btn" 
            title="Tài khoản" data-tooltip="tooltips.auth.profileBtn">
      <img id="authUserAvatar" class="auth-avatar" src="" alt="User">
      <span id="authUserName" class="auth-user-name"></span>
      <svg class="auth-icon-dropdown" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </button>

    <!-- Dropdown Menu -->
    <div id="authDropdownMenu" class="auth-dropdown-menu hidden">
      <div class="auth-menu-header">
        <img id="authMenuAvatar" class="auth-menu-avatar" src="" alt="User">
        <div class="auth-menu-user-info">
          <div id="authMenuName" class="auth-menu-name"></div>
          <div id="authMenuEmail" class="auth-menu-email"></div>
        </div>
      </div>
      
      <div class="auth-menu-divider"></div>
      
      <ul class="auth-menu-items">
        <li>
          <button id="btnAuthAccount" class="auth-menu-item">
            <svg class="auth-menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <circle cx="12" cy="12" r="4"></circle>
              <line x1="21.17" y1="8" x2="12" y2="12"></line>
              <line x1="3.95" y1="6.06" x2="12" y2="12"></line>
              <line x1="10.88" y1="21.94" x2="12" y2="12"></line>
            </svg>
            <span data-i18n="authGoogleAccount">Tài khoản Google</span>
          </button>
        </li>
        
        <li>
          <button id="btnAuthSessionInfo" class="auth-menu-item">
            <svg class="auth-menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span data-i18n="authSessionInfo">Thông tin phiên</span>
          </button>
        </li>
      </ul>
      
      <div class="auth-menu-divider"></div>
      
      <ul class="auth-menu-items">
        <li>
          <button id="btnAuthLogout" class="auth-menu-item auth-menu-item-danger">
            <svg class="auth-menu-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span data-i18n="authLogout">Đăng xuất</span>
          </button>
        </li>
      </ul>
    </div>
  </div>

  <!-- Loading State -->
  <div id="authLoading" class="auth-state auth-loading hidden">
    <div class="auth-loading-spinner"></div>
    <span class="auth-loading-text" data-i18n="authProcessing">Đang xử lý...</span>
  </div>
</div>

<!-- Session Info Modal (Optional) -->
<div id="authSessionModal" class="auth-modal hidden">
  <div class="auth-modal-overlay"></div>
  <div class="auth-modal-content">
    <div class="auth-modal-header">
      <h3 data-i18n="authSessionModalTitle">Thông tin phiên đăng nhập</h3>
      <button id="btnCloseSessionModal" class="auth-modal-close" 
              title="Đóng" data-tooltip="tooltips.auth.closeBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="auth-modal-body">
      <div class="auth-info-item">
        <span class="auth-info-label" data-i18n="authStatusLabel">Trạng thái:</span>
        <span id="sessionStatus" class="auth-info-value" data-i18n="authStatusActive">Đang hoạt động</span>
      </div>
      <div class="auth-info-item">
        <span class="auth-info-label" data-i18n="authTimeRemainingLabel">Thời gian còn lại:</span>
        <span id="sessionTimeRemaining" class="auth-info-value">--</span>
      </div>
      <div class="auth-info-item">
        <span class="auth-info-label" data-i18n="authCreatedAtLabel">Tạo lúc:</span>
        <span id="sessionCreatedAt" class="auth-info-value">--</span>
      </div>
      <div class="auth-info-item">
        <span class="auth-info-label" data-i18n="authExpiresAtLabel">Hết hạn lúc:</span>
        <span id="sessionExpiresAt" class="auth-info-value">--</span>
      </div>
    </div>
    <div class="auth-modal-footer">
      <button id="btnRefreshSession" class="auth-btn auth-btn-primary">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="23 4 23 10 17 10"></polyline>
          <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
        </svg>
        <span data-i18n="authRefreshSession">Làm mới phiên</span>
      </button>
    </div>
  </div>
</div>

<!-- Login Modal (cho first-time login hoặc khi không có session) -->
<div id="authLoginModal" class="auth-modal hidden">
  <div class="auth-modal-overlay"></div>
  <div class="auth-modal-content auth-modal-content-small">
    <div class="auth-modal-header">
      <h3 data-i18n="authLoginModalTitle">Đăng nhập</h3>
      <button id="btnCloseLoginModal" class="auth-modal-close" 
              title="Đóng" data-tooltip="tooltips.auth.closeBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="auth-modal-body auth-login-modal-body">
      <div class="auth-login-icon">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M12 16v-4"></path>
          <path d="M12 8h.01"></path>
        </svg>
      </div>
      <h4 data-i18n="authLoginPrompt">Đăng nhập để tiếp tục</h4>
      <p class="auth-login-description" data-i18n="authLoginDescription">
        Đăng nhập để sử dụng các tính năng nâng cao như đồng bộ cài đặt, lưu trữ đám mây, và nhiều hơn nữa.
      </p>
      <button id="btnGoogleLogin" class="auth-btn auth-btn-google">
        <svg class="auth-google-icon" width="20" height="20" viewBox="0 0 24 24">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        <span data-i18n="authLoginWithGoogle">Đăng nhập với Google</span>
      </button>
      <p class="auth-login-terms">
        <span data-i18n="authLoginTermsLeadIn">Bằng việc đăng nhập, bạn đồng ý với</span> 
        <a href="#" target="_blank" data-i18n="authLoginTermsLink">Điều khoản</a> 
        <span data-i18n="authAnd">và</span> 
        <a href="#" target="_blank" data-i18n="authLoginPrivacyLink">Chính sách bảo mật</a>
      </p>
    </div>
  </div>
</div>